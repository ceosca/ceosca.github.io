<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproductor de MPD con cifrado oct</title>
    <script type='text/javascript' src="//ssl.p.jwpcdn.com/player/v/8.25.0/jwplayer.js"></script>
    <script type='text/javascript'>jwplayer.key='XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo'</script>
</head>
<body>
    <div id="playerContainer"></div>

    <script type='text/javascript'>
        var playerInstance = null;
        var mpdUrl = "https://edge-mix02-mun.cvattv.com.ar/live/c7eds/A3_Series/SA_Live_dash_enc_2A/A3_Series.mpd";
        var jsonUrl = "https://listasm3u.live/arkey/A3_Series.json";

        fetch(jsonUrl)
            .then(response => response.json())
            .then(data => {
                var key = data.keys[0].k;
                var keyId = data.keys[0].kid;

                var config = {
                    playlist: [{
                        sources: [{
                            file: mpdUrl,
                            type: "mpd"
                        }]
                    }],
                    autostart: true,
                    cast: {},
                    controls: true,
                    drm: {
                        oct: {
                            keyId: keyId,
                            key: key
                        }
                    }
                };

                playerInstance = jwplayer("playerContainer").setup(config);
            })
            .catch(error => console.error('Error al cargar el JSON:', error));
    </script>
</body>
</html>
