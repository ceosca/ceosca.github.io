<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Reproductor de Novelas</title>
  <style>
    .novela-info {
      margin-bottom: 20px;
    }
    .novela-info p {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div id="novela-container"></div>

  <div>
    <label for="season-list" accesskey="t">Selecciona la temporada:</label>
    <select id="season-list" aria-label="Lista de temporadas" accesskey="t"></select>

    <label for="chapter-list" accesskey="c">Selecciona el capítulo a reproducir:</label>
    <select id="chapter-list" aria-label="Lista de capítulos" accesskey="c"></select>

    <button id="play-pause" title="Reproducir (Alt+K)" aria-label="Reproducir" accesskey="k">Reproducir</button>
  </div>

  <audio id="repro" src="" type="audio/mpeg"></audio>

  <script>
    let novelasData = {};

    function displayNovelaInfo(novela) {
      const container = document.getElementById('novela-container');
      container.innerHTML = `
        <div class="novela-info">
          <h2>${novela.title}</h2>
          <p><strong>Género:</strong> ${novela.genre}</p>
          <p><strong>Año:</strong> ${novela.year}</p>
          <p><strong>Reparto:</strong> ${novela.cast}</p>
          <p><strong>País de origen:</strong> ${novela.country}</p>
          <p><strong>Sinopsis:</strong> ${novela.synopsis}</p>
        </div>
      `;
    }

    function loadSeasons(novela) {
      const seasonList = document.getElementById('season-list');
      seasonList.innerHTML = '';

      novela.seasons.forEach((season, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.text = season.name;
        seasonList.add(option);
      });
    }

    function setSeasonChapters(season) {
      const chapterList = document.getElementById('chapter-list');
      chapterList.innerHTML = '';

      for (let chapter = 1; chapter <= season.chapters; chapter++) {
        const option = document.createElement('option');
        option.value = chapter;
        option.text = `Capítulo ${chapter}`;
        chapterList.add(option);
      }
    }

    function loadNovela(novelaIndex) {
      const novela = novelasData.novelas[novelaIndex];
      displayNovelaInfo(novela);
      loadSeasons(novela);
      setSeasonChapters(novela.seasons[0]);
    }

    document.getElementById('season-list').addEventListener('change', function() {
      const novelaIndex = 0;
      const selectedSeasonIndex = this.value;
      const novela = novelasData.novelas[novelaIndex];
      const selectedSeason = novela.seasons[selectedSeasonIndex];
      setSeasonChapters(selectedSeason);
    });

    fetch('/novelas/novelas.json')
      .then(response => response.json())
      .then(data => {
        novelasData = data;
        loadNovela(0);
      });
  </script>
</body>
</html>
